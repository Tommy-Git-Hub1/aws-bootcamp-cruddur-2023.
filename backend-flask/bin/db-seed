#! /usr/bin/bash

CYAN='\033[1;36m'
NO_COLOR='\033[0m'
LABEL="db-seed"
printf "${CYAN}== ${LABEL}${NO_COLOR}\n"

seed_path="$(realpath .)/db/seed.sql"
echo $seed_path

if [ "$1" = "prod" ]; then
  echo "Running in production mode"
  URL=$PROD_CONNECTION_URL
else
  URL=$connectionurl
fi

psql $URL cruddur -c "INSERT INTO public.users (display_name, email, handle, cognito_user_id)
VALUES
  ('Andrew Brown','Hafisadeleke97@gmail.com', 'andrewbrown' ,'MOCK'),
  ('Andrew Bayko','tadeleke1305@gmail.com', 'bayko' ,'MOCK'),
  ('Andrew Bayko','Abrown@gmail.com', 'abeezxy' ,'MOCK'),
  ('Andrew Bayko','Abayko@gmail.com', 'baykoleezy' ,'MOCK');

INSERT INTO public.activities (user_uuid, message, expires_at)
VALUES
  (
    (SELECT uuid from public.users WHERE users.handle = 'andrewbrown' LIMIT 1),
    'This was imported as seed data!',
    current_timestamp + interval '10 day'
  );"